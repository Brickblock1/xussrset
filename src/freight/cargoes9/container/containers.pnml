 // 9-cargoes containers
#define IMAGEFILE  "src/freight/cargoes9/container/container-gen20old.png"
cargo_layout_template(cargo9_container20old_1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_container20old_2, 9, 32, 40 + 1 * 67)
cargo_layout_template(cargo9_container20old_0, 9, 32, 40 + 2 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_container20old_a_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..49: cargo9_container20old_1_sprites;
         cargo9_container20old_2_sprites;
}
switch (FEAT_TRAINS, SELF, cargo9_container20old_b_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..49: cargo9_container20old_0_sprites;
         cargo9_container20old_2_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_container20old_sprites,
  (random_bits >> 2) & 0x01)
{
  0: cargo9_container20old_a_sprites;
     cargo9_container20old_b_sprites;
}                          

#define IMAGEFILE  "src/freight/cargoes9/container/container-gen40old.png"
cargo_layout_template(cargo9_container40old_1, 9, 32, 40)
#undef IMAGEFILE

switch (FEAT_TRAINS, SELF, cargo9_container40old_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
     cargo9_container40old_1_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_old_container_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_IDENTITY, 0x100), 
  (random_bits >> 1) & 0x01])  
{
  0: cargo9_container40old_sprites;
     cargo9_container20old_sprites;
}                          

#define IMAGEFILE  "src/freight/cargoes9/container/container-gen20new.png"
cargo_layout_template(cargo9_container20new_1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_container20new_2, 9, 32, 40 + 1 * 67)
cargo_layout_template(cargo9_container20new_0, 9, 32, 40 + 2 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_container20new_a_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..49: cargo9_container20new_1_sprites;
         cargo9_container20new_2_sprites;
}
switch (FEAT_TRAINS, SELF, cargo9_container20new_b_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..49: cargo9_container20new_0_sprites;
         cargo9_container20new_2_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_container20new_sprites,
  (random_bits >> 1) & 0x01)
{
  0: cargo9_container20new_a_sprites;
     cargo9_container20new_b_sprites;
}                          

#define IMAGEFILE  "src/freight/cargoes9/container/container-gen40new.png"
cargo_layout_template(cargo9_container40_goods1, 9, 32, 40)
cargo_layout_template(cargo9_container40_goods2, 9, 32, 107)
#undef IMAGEFILE

switch (FEAT_TRAINS, SELF, cargo_goods1_1_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0x3F, 0x100), cargo_count > 0])
{  
  1: cargo9_container40_goods1_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo_goods1_2_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0xB5, 0x100), cargo_count > 0])
{  
  1: cargo9_container40_goods1_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo_goods1_3_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0x53, 0x100), cargo_count > 0])
{  
  1: cargo9_container40_goods1_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo_goods1_4_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0x93, 0x100), cargo_count > 0])
{  
  1: cargo9_container40_goods1_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo9_container40new1_sprites,
  (random_bits >> 2) & 0x03)                        
{
  0: cargo_goods1_1_sprites;
  1: cargo_goods1_2_sprites;
  2: cargo_goods1_3_sprites;
     cargo_goods1_4_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_container40new2_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_IDENTITY, 0x100), cargo_count > 0])
{  
  1: cargo9_container40_goods2_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo9_container40new_sprites,
  (random_bits >> 2) & 0x01)                        
{
  0: cargo9_container40new1_sprites;
     cargo9_container40new2_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_new_container_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_IDENTITY, 0x100), 
  (random_bits >> 1) & 0x01])
{
  0: cargo9_container40new_sprites;
     cargo9_container20new_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_gen_container_sprites,
  date_of_last_service >= date(USSREND,1,1))
{  
  1: cargo9_new_container_sprites;
     cargo9_old_container_sprites;
}

// Сделать подборку из макс 6 цветов (6*5 = 30 < 32)

// Контейнеры 
//cargo9_gen_container_sprites

// Рефконтейнеры 
#define IMAGEFILE  "src/freight/cargoes9/container/container-ref40.png"
cargo_layout_template(cargo9_ref_container_40_1_s1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_ref_container_40_2_s1, 9, 32, 40 + 1 * 67)
cargo_layout_template(cargo9_ref_container_40_3_s1, 9, 32, 40 + 2 * 67)
cargo_layout_template(cargo9_ref_container_40_4_s1, 9, 32, 40 + 3 * 67)
cargo_layout_template(cargo9_ref_container_40_5_s1, 9, 32, 40 + 4 * 67)
cargo_layout_template(cargo9_ref_container_40_6_s1, 9, 32, 40 + 5 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_1_sprites,
 cargo_count * 100 / cargo_capacity)
{ 0: dummy_sprites; 
     cargo9_ref_container_40_1_s1_sprites; }
switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_2_sprites,
 cargo_count * 100 / cargo_capacity)
{ 0: dummy_sprites; 
     cargo9_ref_container_40_2_s1_sprites; }
switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_3_sprites,
 cargo_count * 100 / cargo_capacity)
{ 0: dummy_sprites; 
     cargo9_ref_container_40_3_s1_sprites; }
switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_4_sprites,
 cargo_count * 100 / cargo_capacity)
{ 0: dummy_sprites; 
     cargo9_ref_container_40_4_s1_sprites; }
switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_5_sprites,
 cargo_count * 100 / cargo_capacity)
{ 0: dummy_sprites; 
     cargo9_ref_container_40_5_s1_sprites; }
switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_6_sprites,
 cargo_count * 100 / cargo_capacity)
{ 0: dummy_sprites; 
     cargo9_ref_container_40_6_s1_sprites; }
switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_a_sprites,
  (random_bits >> 2) & 0x07)  
{
  0: cargo9_ref_container_40_1_sprites;
  1: cargo9_ref_container_40_1_sprites;
  2: cargo9_ref_container_40_2_sprites;
  3: cargo9_ref_container_40_3_sprites;
  4: cargo9_ref_container_40_3_sprites;
  5: cargo9_ref_container_40_4_sprites;
  6: cargo9_ref_container_40_5_sprites;
     cargo9_ref_container_40_6_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_c1_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0x3F, 0x100), cargo_count > 0])
{  
  1: cargo9_ref_container_40_a_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_c2_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0xB5, 0x100), cargo_count > 0])
{  
  1: cargo9_ref_container_40_a_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_c3_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0x53, 0x100), cargo_count > 0])
{  
  1: cargo9_ref_container_40_a_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_c4_sprites,
  [STORE_TEMP(CB_FLAG_MORE_SPRITES | ttdall_cc + 0x93, 0x100), cargo_count > 0])
{  
  1: cargo9_ref_container_40_a_sprites;  
     return CB_FAILED;
}

switch (FEAT_TRAINS, SELF, cargo9_ref_container_40_c_sprites,
[  STORE_TEMP(CB_FLAG_MORE_SPRITES | ((random_bits >> 3) & 0x03), 0x100) ])
{  
  0: cargo9_ref_container_40_c1_sprites;
  1: cargo9_ref_container_40_c2_sprites;
  2: cargo9_ref_container_40_c3_sprites;
     cargo9_ref_container_40_c4_sprites;  
}

#define IMAGEFILE  "src/freight/cargoes9/container/container-ref20-1.png"
cargo_layout_template(cargo9_ref_container_20_1_s1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_ref_container_20_1_s2, 9, 32, 40 + 1 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_ref_container_20_1_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_ref_container_20_1_s1_sprites;
         cargo9_ref_container_20_1_s2_sprites;
}
#define IMAGEFILE  "src/freight/cargoes9/container/container-ref20-2.png"
cargo_layout_template(cargo9_ref_container_20_2_s1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_ref_container_20_2_s2, 9, 32, 40 + 1 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_ref_container_20_2_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_ref_container_20_2_s1_sprites;
         cargo9_ref_container_20_2_s2_sprites;
}
#define IMAGEFILE  "src/freight/cargoes9/container/container-ref20-1-2.png"
cargo_layout_template(cargo9_ref_container_20_1_2_s1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_ref_container_20_1_2_s2, 9, 32, 40 + 1 * 67)
cargo_layout_template(cargo9_ref_container_20_1_2_s0, 9, 32, 40 + 2 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_ref_container_20_1_2_a_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_ref_container_20_1_2_s1_sprites;
         cargo9_ref_container_20_1_2_s2_sprites;
}
switch (FEAT_TRAINS, SELF, cargo9_ref_container_20_1_2_b_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_ref_container_20_1_2_s0_sprites;
         cargo9_ref_container_20_1_2_s2_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_ref_container_20_c_sprites,
  (random_bits >> 2) & 0x03)  
{
  0: cargo9_ref_container_20_1_sprites;
  1: cargo9_ref_container_20_2_sprites;
  2: cargo9_ref_container_20_1_2_a_sprites;
     cargo9_ref_container_20_1_2_b_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_ref_container_sprites,
[  STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_IDENTITY, 0x100),
   (random_bits >> 1) & 0x01])
{  
  0: cargo9_ref_container_40_c_sprites;  
     cargo9_ref_container_20_c_sprites;  
}

// Танк - контейнеры 
#define IMAGEFILE  "src/freight/cargoes9/container/container-tank20-1.png"
cargo_layout_template(cargo9_tank_container_20_1_s1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_tank_container_20_1_s2, 9, 32, 40 + 1 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_tank_container_20_1_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_tank_container_20_1_s1_sprites;
         cargo9_tank_container_20_1_s2_sprites;
}
#define IMAGEFILE  "src/freight/cargoes9/container/container-tank20-2.png"
cargo_layout_template(cargo9_tank_container_20_2_s1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_tank_container_20_2_s2, 9, 32, 40 + 1 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_tank_container_20_2_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_tank_container_20_2_s1_sprites;
         cargo9_tank_container_20_2_s2_sprites;
}
#define IMAGEFILE  "src/freight/cargoes9/container/container-tank20-1-2.png"
cargo_layout_template(cargo9_tank_container_20_1_2_s1, 9, 32, 40 + 0 * 67)
cargo_layout_template(cargo9_tank_container_20_1_2_s2, 9, 32, 40 + 1 * 67)
cargo_layout_template(cargo9_tank_container_20_1_2_s0, 9, 32, 40 + 2 * 67)
#undef IMAGEFILE
switch (FEAT_TRAINS, SELF, cargo9_tank_container_20_1_2_a_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_tank_container_20_1_2_s1_sprites;
         cargo9_tank_container_20_1_2_s2_sprites;
}
switch (FEAT_TRAINS, SELF, cargo9_tank_container_20_1_2_b_sprites,
 cargo_count * 100 / cargo_capacity)
{
  0: dummy_sprites; 
  1..67: cargo9_tank_container_20_1_2_s0_sprites;
         cargo9_tank_container_20_1_2_s2_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_tank_container_20_c_sprites,
  (random_bits >> 1) & 0x03)  
{
  0: cargo9_tank_container_20_1_sprites;
  1: cargo9_tank_container_20_2_sprites;
  2: cargo9_tank_container_20_1_2_a_sprites;
     cargo9_tank_container_20_1_2_b_sprites;
}

switch (FEAT_TRAINS, SELF, cargo9_tank_container_sprites,
[  STORE_TEMP(CB_FLAG_MORE_SPRITES | (ttd_cc2 + 0x20+ ((random_bits >> 3) & 0x0F)), 0x100)])
{  
  cargo9_tank_container_20_c_sprites;  
}

// Выбор 

switch (FEAT_TRAINS, SELF, cargo9all_container_a1972_sprites,
  cargo_type_in_veh)
{
gen_container_cargo_check(cargo9_gen_container_sprites)
  align_10_sprites;
} 

switch (FEAT_TRAINS, SELF, cargo9all_container_a1988_sprites,
  cargo_type_in_veh)
{
ref_container_cargo_check(cargo9_ref_container_sprites)
gen_container_cargo_check(cargo9_gen_container_sprites)
  align_10_sprites;
} 

switch (FEAT_TRAINS, SELF, cargo9all_container_a1995_sprites,
  cargo_type_in_veh)
{
tank_container_cargo_check(cargo9_tank_container_sprites)
ref_container_cargo_check(cargo9_ref_container_sprites)
gen_container_cargo_check(cargo9_gen_container_sprites)
  align_10_sprites;
} 

switch (FEAT_TRAINS, SELF, cargo9all_container_sprites,
[  STORE_TEMP(2, 8), 
   (date_of_last_service >= date(1972,1,1)) +  
   (date_of_last_service >= date(1988,1,1)) +  
   (date_of_last_service >= date(1995,1,1))])  
{
  1: cargo9all_container_a1972_sprites;
  2: cargo9all_container_a1988_sprites;
  3: cargo9all_container_a1995_sprites;
     return 0;
}
