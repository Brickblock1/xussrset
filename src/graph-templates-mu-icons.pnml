 /// graphics definition - Icons templates

#define MU_attach_wagon_icon_template(name, vehid, icon)          \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,             \
  (position_in_consist_from_end == 1) )                           \
{ 1: name##_next_can_attach_wagon_template;                       \
     dummy_sprites; }                                             \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,            \
  vehicle_type_id != vehid)                                       \
{ 1: icon;                                                        \
     name##_sprites_start_add2; }                                 \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,               \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),  \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                    \
  enable_icons ])                                                 \
{ 1: name##_sprites_start_add;                                    \
     name##_direction_template; }                                 \

#define MU_attach_wagon_icon_template_only(name, vehid, icon, only)  \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add3,              \
  count_veh_id(vehid) )                                              \
{ 1: only;                                                           \
     dummy_sprites; }                                                \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,                \
  (position_in_consist_from_end == 1) )                              \
{ 1: name##_sprites_start_add3;                                      \
     dummy_sprites; }                                                \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,               \
  vehicle_type_id != vehid)                                          \
{ 1: icon;                                                           \
     name##_sprites_start_add2; }                                    \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                  \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),     \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                   \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                       \
  enable_icons ])                                                    \
{ 1: name##_sprites_start_add;                                       \
     name##_sprites_start; }                                         \

#define MU_attach_wagon_icon_template_only2(name, vehid, icon, only, only2)  \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add3,                      \
  count_veh_id(vehid) )                                                      \
{ 1: only;                                                                   \
  2: only2;                                                                  \
  3: only;                                                                   \
     dummy_sprites; }                                                        \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,                        \
  (position_in_consist_from_end == 1) )                                      \
{ 1: name##_sprites_start_add3;                                              \
     dummy_sprites; }                                                        \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,                       \
  vehicle_type_id != vehid)                                                  \
{ 1: icon;                                                                   \
     name##_sprites_start_add2; }                                            \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                          \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),             \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                           \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                               \
  enable_icons ])                                                            \
{ 1: name##_sprites_start_add;                                               \
     name##_sprites_start; }                                                 \

#define MU_attach_wagon_icon_template2(name, vehid1, vehid2, icon)  \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,               \
  (position_in_consist_from_end == 1) )                             \
{ 1: name##_next_can_attach_wagon_template;                         \
     dummy_sprites; }                                               \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,              \
  (vehicle_type_id != vehid1) && (vehicle_type_id != vehid2))       \
{ 1: icon;                                                          \
     name##_sprites_start_add2; }                                   \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                 \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),    \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                  \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                      \
  enable_icons ])                                                   \
{ 1: name##_sprites_start_add;                                      \
     name##_direction_template; }                                   \

#define MU_attach_wagon_icon_template2_only(name, vehid1, vehid2, icon, only)  \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add3,                        \
  count_veh_id(vehid1) + count_veh_id(vehid2) )                                \
{ 1: only;                                                                     \
     dummy_sprites; }                                                          \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,                          \
  (position_in_consist_from_end == 1) )                                        \
{ 1: name##_sprites_start_add3;                                                \
     dummy_sprites; }                                                          \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,                         \
  (vehicle_type_id != vehid1) && (vehicle_type_id != vehid2))                  \
{ 1: icon;                                                                     \
     name##_sprites_start_add2; }                                              \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                            \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),               \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                             \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                                 \
  enable_icons ])                                                              \
{ 1: name##_sprites_start_add;                                                 \
     name##_sprites_start; }                                                   \

#define MU_attach_wagon_icon_template2_only2(name, vehid1, vehid2, icon, only, only2, back)  \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add3,                                      \
  count_veh_id(vehid1) + count_veh_id(vehid2) )                                              \
{ 1: only;                                                                                   \
  2: only2;                                                                                  \
  3: only;                                                                                   \
     dummy_sprites; }                                                                        \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,                                        \
  (position_in_consist_from_end == 1) )                                                      \
{ 1: name##_sprites_start_add3;                                                              \
     dummy_sprites; }                                                                        \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,                                       \
  (vehicle_type_id != vehid1) && (vehicle_type_id != vehid2))                                \
{ 1: icon;                                                                                   \
     name##_sprites_start_add2; }                                                            \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                                          \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),                             \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                                           \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                                               \
  enable_icons ])                                                                            \
{ 1: name##_sprites_start_add;                                                               \
     name##_sprites_start##back; }                                                           \

#define MU_attach_wagon_icon_template2_only3_shift(name, vehid1, vehid2, icon, only, only2, only3, shift)  \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add3,                                                    \
  count_veh_id(vehid1) + count_veh_id(vehid2) )                                                            \
{ 1: only;                                                                                                 \
  2: only2;                                                                                                \
  3: only;                                                                                                 \
  4: only3;                                                                                                \
  5: only;                                                                                                 \
     dummy_sprites; }                                                                                      \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,                                                      \
  (position_in_consist_from_end == 1 + shift) )                                                            \
{ 1: name##_sprites_start_add3;                                                                            \
     dummy_sprites; }                                                                                      \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,                                                     \
  (vehicle_type_id != vehid1) && (vehicle_type_id != vehid2))                                              \
{ 1: icon;                                                                                                 \
     name##_sprites_start_add2; }                                                                          \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                                                        \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),                                           \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                                                         \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                                                             \
  enable_icons ])                                                                                          \
{ 1: name##_sprites_start_add;                                                                             \
     name##_sprites_start; }                                                                               \

#define MU_attach_wagon_icon_template4_only(name, vehid1, vehid2, vehid3, vehid4, icon, only)  \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add3,                                        \
  count_veh_id(vehid1) +                                                                       \
  count_veh_id(vehid2) +                                                                       \
  count_veh_id(vehid3) +                                                                       \
  count_veh_id(vehid4))                                                                        \
{ 1: only;                                                                                     \
     dummy_sprites; }                                                                          \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,                                          \
  (position_in_consist_from_end == 1) )                                                        \
{ 1: name##_sprites_start_add3;                                                                \
     dummy_sprites; }                                                                          \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,                                         \
  (vehicle_type_id != vehid1) &&                                                               \
  (vehicle_type_id != vehid2) &&                                                               \
  (vehicle_type_id != vehid3) &&                                                               \
  (vehicle_type_id != vehid4))                                                                 \
{ 1: icon;                                                                                     \
     name##_sprites_start_add2; }                                                              \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                                            \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),                               \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                                             \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                                                 \
  enable_icons ])                                                                              \
{ 1: name##_sprites_start_add;                                                                 \
     name##_sprites_start; }                                                                   \

#define MU_attach_wagon_icon_template4_only2(name, vehid1, vehid2, vehid3, vehid4, icon, only, only2, back)  \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add3,                                                      \
  count_veh_id(vehid1) +                                                                                     \
  count_veh_id(vehid2) +                                                                                     \
  count_veh_id(vehid3) +                                                                                     \
  count_veh_id(vehid4))                                                                                      \
{ 1: only;                                                                                                   \
  2: only2;                                                                                                  \
  3: only;                                                                                                   \
     dummy_sprites; }                                                                                        \
switch (FEAT_TRAINS, SELF, name##_sprites_start_add2,                                                        \
  (position_in_consist_from_end == 1) )                                                                      \
{ 1: name##_sprites_start_add3;                                                                              \
     dummy_sprites; }                                                                                        \
switch (FEAT_TRAINS, PARENT, name##_sprites_start_add,                                                       \
  (vehicle_type_id != vehid1) &&                                                                             \
  (vehicle_type_id != vehid2) &&                                                                             \
  (vehicle_type_id != vehid3) &&                                                                             \
  (vehicle_type_id != vehid4))                                                                               \
{ 1: icon;                                                                                                   \
     name##_sprites_start_add2; }                                                                            \
switch (FEAT_TRAINS, SELF, name##_sprites_start_sp,                                                          \
[ STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),                                             \
  (getbits(extra_callback_info1, 0, 8) == 0x10) &&                                                           \
  (getbits(extra_callback_info1, 8, 8) > 0) &&                                                               \
  enable_icons ])                                                                                            \
{ 1: name##_sprites_start_add;                                                                               \
     name##_sprites_start##back; }                                                                           \

// end
